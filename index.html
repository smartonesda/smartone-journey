<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartOne Journey</title>
  <link rel="icon" href="assets/images/mascot.png" type="image/x-icon">
  <link rel="stylesheet" href="assets/css/styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <!-- preload images mascot -->
  <link rel="preload" href="assets/images/mascot.png" as="image">
  <meta property="og:title" content="SmartOne Journey">
  <meta property="og:description" content="Jelajahi Dunia Pengetahuan!">
  <meta property="og:image" content="https://restucandra27.github.io/lomba_smartonejourney/assets/images/mascot.png">
  <!-- https://restucandra27.github.io/lomba_smartonejourney/ -->
  <meta property="og:url" content="https://restucandra27.github.io/lomba_smartonejourney/">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="SmartOne Journey">
  <meta property="og:locale" content="id_ID">
  <meta property="og:locale:alternate" content="en_US">
</head>

<body>
  <!-- LOADING OVERLAY -->
  <div id="loading-overlay">
    <div class="loading-content">
      <img src="assets/images/mascot.png" alt="Loading Logo" class="loading-logo">
      <h2>Sedang Memuat...</h2>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <p id="loadingText">Menyiapkan aset permainan...</p>
    </div>
  </div>
  <!-- Landing screen (ID: screen-landing)
       Digunakan sebagai layar pembuka. Elemen penting:
       - `#gassMulaiBtn` -> membuka screen setup (lihat handler `gassMulaiBtn`).
       - `#howToPlayBtnLanding` -> membuka modal `howToPlayModal` (fungsi `openHowToPlayModal`).
  -->
  <div id="screen-landing" class="screen active">

    <div class="landing-container">
      <div class="header-logos">
        <img src="assets/images/Logo_sekolah.png" alt="Logo Sekolah" class="logo-img logo-school">

        <div class="divider"></div>

        <img src="assets/images/logo_iso.png" alt="Logo ISO" class="logo-img logo-iso">
      </div>
      <h1>SmartOne Journey ğŸš€</h1>
      <p>Jelajahi Dunia Pengetahuan!</p>
      <div class="button-welcome-screen">
        <button id="gassMulaiBtn">GASS MULAI</button>
        <button id="howToPlayBtnLanding" class="btn-secondary">
          Cara Bermain
        </button>
      </div>
    </div>
  </div>

  <!-- Setup screen (ID: screen-setup)
       Area pilihan sebelum permainan dimulai. Elemen terkait JS:
       - `#category-card-group` diisi oleh `populateCategorySelect()` dari `data_game.json`.
       - Tombol di `#player-count-group` mengubah `selectedPlayerCount`.
       - `#startBtn` memicu inisialisasi game: set `currentTiles`, `renderBoard()`, `createPlayers()`.
  -->
  <div id="screen-setup" class="screen">
    <div class="setup-container">
      <h2>Pilih Kategori:</h2>
      <div id="category-card-group" class="card-group"></div>

      <h2>Pilih Jumlah Pemain:</h2>
      <div id="player-count-group" class="btn-group">
        <button class="btn-choice selected" data-value="2">
          ğŸ‘¤ 2 Pemain
        </button>
        <button class="btn-choice" data-value="3">ğŸ‘¥ 3 Pemain</button>
        <button class="btn-choice" data-value="4">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ 4 Pemain</button>
      </div>

      <button id="startBtn" disabled>Memuat Data...</button>
    </div>
  </div>

  <!-- Game screen (ID: screen-game)
       Area utama permainan. Elemen penting dan hubungan ke `game.js`:
       - `#howToPlayBtnGame` -> membuka modal `howToPlayModal`.
       - `#backBtnGame` -> kembali ke menu & mereset state permainan.
       - `#sidebar-toggle-btn` -> toggle panel info pemain.
       - `#player-info-container` diisi oleh `updatePlayersPanel()`.
       - `#board` dirender oleh `renderBoard()`.
       - `#dice` (`#diceOverlay`) -> klik men-trigger `rollDiceAnimated()` dan `movePlayerAnimated()`.
       - `#pion1..#pion4` -> posisi diatur oleh `updatePionPosition()` dan `placeAllPions()`.
       - `#notifPopup` -> menampilkan notifikasi via `showNotif()` atau `showTilePopup()`.
       - `#gameOverOverlay` -> modal untuk game-over yang di-handle oleh `showCustomModal()` dan `handleGameOver()`.
  -->
  <div id="screen-game" class="screen">
    <button id="howToPlayBtnGame" class="btn-help" aria-label="Cara Bermain">
      ?
    </button>
    <button id="backBtnGame" class="btn-back" aria-label="Kembali ke Menu">
      ğŸ 
    </button>
    <button id="sidebar-toggle-btn" class="btn-sidebar-toggle" aria-label="Toggle Player Info">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <button id="muteBtn" class="btn-mute" onclick="toggleMute()" aria-label="Toggle Music">
      ğŸ”Š
    </button>

    <div class="center-area">
      <h1>SmartOne Journey</h1>
      <h2 id="categoryTitle" class="category-badge">Kategori: -</h2>

      <div id="board-wrapper">
        <div id="player-info-container">
          <div id="player1-info" class="player-info-box pos-tl"></div>
          <div id="player2-info" class="player-info-box pos-tr"></div>
          <div id="player3-info" class="player-info-box pos-bl"></div>
          <div id="player4-info" class="player-info-box pos-br"></div>
        </div>

        <!-- Board: grid 6x6. Dibuat ulang oleh `renderBoard()` menggunakan `path` dan `currentTiles`. -->
        <div id="board" class="board"></div>

        <!-- Dice overlay: menampilkan dadu, instruksi giliran, dan status lemparan.
             Klik `#dice` memicu alur lemparan (guard `isProcessingTurn` mencegah spam).
        -->
        <div id="diceOverlay">
          <div id="dice" role="button" tabindex="0" aria-label="Dadu">
            <div class="dice-container">
              <div class="face front">1</div>
              <div class="face back">6</div>
              <div class="face top">5</div>
              <div class="face bottom">2</div>
              <div class="face right">3</div>
              <div class="face left">4</div>
            </div>
          </div>
          <!-- `#turnInfo` di-update oleh `setTurnInfo()`; `#diceValue` menampilkan hasil/instruksi. -->
          <div id="turnInfo" class="turn-info-center">Menunggu...</div>
          <div id="diceValue" class="dice-instruction">Lempar dadu!</div>
        </div>

        <!-- Pion pemain (id `pion1`..`pion4`) ditempatkan absolut di atas board; posisi diatur oleh JS. -->
        <div id="pion1" class="pion" aria-hidden="true">â™Ÿ</div>
        <div id="pion2" class="pion" aria-hidden="true">â™Ÿ</div>
        <div id="pion3" class="pion" aria-hidden="true">â™Ÿ</div>
        <div id="pion4" class="pion" aria-hidden="true">â™Ÿ</div>
      </div>
    </div>

    <!-- Quiz Modal (ID: quizModal)
         - `askQuiz()` menulis pertanyaan ke `#quizQuestion` dan pilihan ke `#quizChoices`.
         - `#quizSubmit` di-bind saat `askQuiz()` dipanggil untuk menangkap jawaban dan resolve Promise.
         - `modalNotif` menampilkan pesan singkat di dalam dialog jika perlu.
    -->
    <dialog id="quizModal">
      <p id="quizQuestion" class="quiz-question"></p>
      <div id="quizChoices"></div>
      <div id="modalNotif" class="modalNotif"></div>
      <div class="quiz-footer">
        <button id="quizSubmit">Jawab</button>
        <button id="quizSkip" class="btn-secondary" style="margin-left: 10px; margin-top: 0;">Lewati</button>
      </div>
    </dialog>

    <!-- `#notifPopup` dipakai oleh `showNotif()` dan `showTilePopup()` untuk pesan singkat -->
    <div id="notifPopup" class="notif-popup" aria-live="polite"></div>
    <!-- Game Over Overlay: konten diisi/diubah oleh `showCustomModal()` dan `handleGameOver()` -->
    <div id="gameOverOverlay" class="custom-overlay">
      <div class="game-over-box">
        <div class="go-icon" id="goIcon">ğŸ†</div>
        <h2 id="goTitle">GAME OVER</h2>
        <p id="goMessage">Pesan akan muncul di sini...</p>

        <div class="go-buttons">
          <button id="btnRestartGame">Main Lagi</button>
          <button id="btnBackToMenu" class="btn-secondary">Menu Utama</button>
        </div>
      </div>
    </div>
  </div>

  <dialog id="howToPlayModal">
    <div class="modal-header">
      <h2>ğŸ“– Cara Bermain</h2>
      <button id="closeHowToPlay" class="btn-close" aria-label="Tutup">
        &times;
      </button>
    </div>
    <div class="modal-content">
      <section>
        <h3>ğŸ¯ Tujuan Game</h3>
        <p>
          Kumpulkan poin sebanyak mungkin dengan mengelola keuangan dengan
          bijak. Naik level dengan mencapai target poin tertentu!
        </p>
      </section>
      <section>
        <h3>ğŸ² Cara Main</h3>
        <ol>
          <li>Klik <strong>dadu</strong> di tengah papan untuk melempar</li>
          <li>Pion Anda akan bergerak sesuai angka dadu</li>
          <li>Ikuti instruksi di setiap kotak yang Anda singgahi</li>
          <li>Jawab kuis untuk mendapat bonus poin</li>
        </ol>
      </section>
      <section>
        <h3>ğŸ¨ Jenis Kotak</h3>
        <div class="tile-legend">
          <div class="legend-item">
            <span class="legend-color income"></span><strong>Income (Hijau)</strong> - Dapat penghasilan
          </div>
          <div class="legend-item">
            <span class="legend-color expense"></span><strong>Expense (Merah)</strong> - Pengeluaran wajib
          </div>
          <div class="legend-item">
            <span class="legend-color tax"></span><strong>Tax (Kuning)</strong> - Bayar pajak (%)
          </div>
          <div class="legend-item">
            <span class="legend-color save"></span><strong>Save (Biru)</strong> - Menabung masa depan
          </div>
          <div class="legend-item">
            <span class="legend-color bonus"></span><strong>Bonus (Ungu)</strong> - Kuis berhadiah!
          </div>
          <div class="legend-item">
            <span class="legend-color penalty"></span><strong>Penalty (Oranye)</strong> - Denda/kerugian
          </div>
        </div>
      </section>
      <section>
        <h3>â­ Sistem Level</h3>
        <ul>
          <li><strong>Level 1:</strong> 0 - 99.999 poin</li>
          <li><strong>Level 2:</strong> 100.000 - 229.999 poin</li>
          <li><strong>Level 3:</strong> 230.000+ poin</li>
        </ul>
      </section>
      <section>
        <h3>ğŸ’¡ Tips</h3>
        <ul>
          <li>Lewati kotak START untuk bonus +10.000 poin</li>
          <li>Menabung itu penting untuk masa depan!</li>
        </ul>
      </section>
    </div>
    <div class="modal-footer">
      <button id="closeHowToPlayBtn" class="btn-primary">Mengerti!</button>
    </div>
  </dialog>

  <dialog id="confirmationModal">
    <div class="modal-header">
      <h2>âš ï¸ Konfirmasi</h2>
    </div>
    <div class="modal-content" style="text-align: center;">
      <p>Yakin ingin kembali ke menu utama? Progres permainan akan hilang.</p>
    </div>
    <div class="modal-footer" style="justify-content: center; gap: 15px;">
      <button id="btnConfirmYes" style="background-color: var(--color-expense);">Ya, Keluar</button>
      <button id="btnConfirmNo" class="btn-secondary" style="margin-top: 0;">Batal</button>
    </div>
  </dialog>

  <script src="assets/js/game.js"></script>
  <!-- WINNER MODAL -->
  <div id="winnerModal" class="winner-modal">
    <div id="confetti-container"></div>
    <div class="winner-content">
      <h1 class="winner-title">WINNER!</h1>
      <div id="winnerName" class="winner-name">Player Name</div>
      <div class="winner-trophy">ğŸ†</div>
      <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem;">
        <button id="playAgainBtn" class="btn-primary">Main Lagi</button>
        <button id="backToMenuBtn" class="btn-secondary">Menu Utama</button>
      </div>
    </div>
  </div>

</body>

</html>